"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8135],{4352:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=n(4848),o=n(8453);const a={id:"garnet-api",sidebar_label:"Garnet API",title:"Garnet API"},i=void 0,s={id:"dev/garnet-api",title:"Garnet API",description:"The IGarnetAPI interface contains the operators exposed to the public API, which ultimately perform operations over the keys stored in Garnet. It inherits from IGarnetReadApi and IGarnetAdvancedApi.",source:"@site/docs/dev/garnet-api.md",sourceDirName:"dev",slug:"/dev/garnet-api",permalink:"/garnet/docs/dev/garnet-api",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/garnet/tree/main/website/docs/dev/garnet-api.md",tags:[],version:"current",frontMatter:{id:"garnet-api",sidebar_label:"Garnet API",title:"Garnet API"},sidebar:"garnetDocSidebar",previous:{title:"Processing Layer",permalink:"/garnet/docs/dev/processing"},next:{title:"Introduction",permalink:"/garnet/docs/dev/tsavorite/intro"}},d={},c=[{value:"Adding a new command",id:"adding-a-new-command",level:3}];function l(e){const t={code:"code",em:"em",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"The IGarnetAPI interface contains the operators exposed to the public API, which ultimately perform operations over the keys stored in Garnet. It inherits from IGarnetReadApi and IGarnetAdvancedApi."}),"\n",(0,r.jsx)(t.p,{children:"For adding an new operator or command to the API, you should add a new method to the IGarnetApi, if this is a write operation, or to the IGarnetReadApi in the case of a read one."}),"\n",(0,r.jsx)(t.h3,{id:"adding-a-new-command",children:"Adding a new command"}),"\n",(0,r.jsx)(t.p,{children:"A new command is implemented with the following methods: (See ZADD for further details)"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"A private unsafe bool Network[CommandName] in the internal class RespServerSession."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"private unsafe bool NetworkZADD<TObjectContext>(int count, byte* ptr, ref TObjectContext objectStoreContext)\n"})}),"\n",(0,r.jsx)(t.p,{children:"This method contains the operations that read and parse the message from the network buffer and write the resp formatted response from the command, back to the network buffer."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"An internal method Try[CommandName] in the class StorageSession."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"internal GarnetStatus Try[CommandName]<TObjectContext>(ref byte[] key, ref SpanByte input, ref FasterObjectOutput output, ref TObjectContext objectStoreContext)\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This method is part of the Storage layer. This storage API ONLY performs the RMW or Read operation calls, and it wraps over the Tsavorite API. All the current implemented commands can be found under the folder ",(0,r.jsx)(t.em,{children:"Storage"}),", inside the Garnet.Server project (folder ",(0,r.jsx)(t.em,{children:"/libs/server/Storage/Session/)"}),"."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"An internal method Try[CommandName] using the ArgSlice type."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",children:"internal GarnetStatus Try[CommandName]<TObjectContext>(ArgSlice key, ArgSlice score, ArgSlice member, out int result, ref TObjectContext objectStoreContext)\n"})}),"\n",(0,r.jsx)(t.p,{children:"This method is optional. Notice this ArgSlice type is used instead of byte[], also this method does not read any value from the network buffer and it does not rely on the RESP protocol. It is the way to extended or add functionality to the API, that can be used in server procedures that use csharp code."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var r=n(6540);const o={},a=r.createContext(o);function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);